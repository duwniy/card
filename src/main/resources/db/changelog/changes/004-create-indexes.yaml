databaseChangeLog:
  - changeSet:
      id: 004-create-indexes
      author: developer
      changes:
        - createIndex:
            indexName: idx_cards_user_id
            tableName: cards
            columns:
              - column:
                  name: user_id
        - createIndex:
            indexName: idx_cards_status
            tableName: cards
            columns:
              - column:
                  name: status
        - createIndex:
            indexName: idx_cards_user_status
            tableName: cards
            columns:
              - column:
                  name: user_id
              - column:
                  name: status
        - createIndex:
            indexName: idx_transactions_card_id
            tableName: transactions
            columns:
              - column:
                  name: card_id
        - createIndex:
            indexName: idx_transactions_external_id
            tableName: transactions
            columns:
              - column:
                  name: external_id
            unique: true
        - createIndex:
            indexName: idx_transactions_type
            tableName: transactions
            columns:
              - column:
                  name: type
        - createIndex:
            indexName: idx_transactions_created_at
            tableName: transactions
            columns:
              - column:
                  name: created_at
                  descending: true
        - createIndex:
            indexName: idx_transactions_card_created
            tableName: transactions
            columns:
              - column:
                  name: card_id
              - column:
                  name: created_at
                  descending: true
        - createIndex:
            indexName: idx_idempotency_key
            tableName: idempotency_records
            columns:
              - column:
                  name: idempotency_key
            unique: true
        - createIndex:
            indexName: idx_idempotency_expires_at
            tableName: idempotency_records
            columns:
              - column:
                  name: expires_at