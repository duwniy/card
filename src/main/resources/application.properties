spring.application.name=card
spring:
application:
name: card-processing-service

# ??????? ?? ????????? (dev ??? prod)
profiles:
active: dev

# ????????? ???? ??????
datasource:
url: jdbc:postgresql://localhost:5432/card_db
username: postgres
password: postgres
driver-class-name: org.postgresql.Driver
hikari:
maximum-pool-size: 10
minimum-idle: 5
connection-timeout: 30000
idle-timeout: 600000
max-lifetime: 1800000

# JPA/Hibernate ?????????
jpa:
ddl-auto: none  # Liquibase ????????? ??????
show-sql: true
open-in-view: false
properties:
hibernate:
format_sql: true
dialect: org.hibernate.dialect.PostgreSQLDialect
jdbc:
batch_size: 20
order_inserts: true
order_updates: true

# Liquibase ?????????
liquibase:
enabled: true
change-log: classpath:db/changelog/db.changelog-master.yaml

# ???????????
cache:
type: simple
cache-names: exchangeRates

# Jackson ?????????
jackson:
default-property-inclusion: non_null
serialization:
write-dates-as-timestamps: false

# CBU API ?????????
cbu:
api:
base-url: https://cbu.uz/ru/arkhiv-kursov-valyut/json
timeout: 5000  # milliseconds

# JWT ?????????
jwt:
secret: ${JWT_SECRET:your-secret-key-change-this-in-production-make-it-very-long-and-secure-at-least-256-bits}
expiration: 86400000  # 24 hours

# Server ?????????
server:
port: 8080
compression:
error:
include-message: always
include-binding-errors: always

# Actuator (??????????)
management:
endpoints:
web:
exposure:
include: health,info,metrics
endpoint:
health:
show-details: when-authorized

# Springdoc OpenAPI (Swagger)
springdoc:
api-docs:
swagger-ui:
path: /swagger-ui.html
operations-sorter: method